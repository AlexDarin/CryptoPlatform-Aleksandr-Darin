<div class="crypto-search">
  <app-crypto-search
    placeholder="Search cryptocurrencies"
    (searchChanged)="onSearchTextChanged($event)"
  />
  <app-currency-selector/>
</div>

<table
  mat-table
  [dataSource]="filteredCryptoData | search: searchText: ['name', 'symbol']"
  matSort
  (matSortChange)="onSort($event)"
  class="mat-elevation-z8"
>
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Name
    </th>
    <td mat-cell *matCellDef="let element"> {{ element.name }} </td>
  </ng-container>

  <ng-container matColumnDef="symbol">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Symbol
    </th>
    <td mat-cell *matCellDef="let element"> {{ element.symbol }} </td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Price ({{ selectedCurrency }})
    </th>
    <td mat-cell *matCellDef="let element"> {{ element.price }} </td>
  </ng-container>

  <ng-container matColumnDef="marketCap">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Market Cap ({{ selectedCurrency }})
    </th>
    <td mat-cell *matCellDef="let element"> {{ element.marketCap }} </td>
  </ng-container>

  <ng-container matColumnDef="supply">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Supply
    </th>
    <td mat-cell *matCellDef="let element"> {{ element.supply }} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
